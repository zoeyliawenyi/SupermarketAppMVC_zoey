<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZozoMart | Favorites</title>
  <style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
:root { --text:#1f2430; --muted:#6b7280; --border:#e5e7eb; --shadow:0 12px 30px rgba(17,24,39,0.08); --radius:16px; --accent:#ff5c8a; --accent-2:#ff8fb1; }
body { margin:0; font-family:'Poppins',sans-serif; background: radial-gradient(circle at 20% 20%, rgba(255, 92, 138, 0.08), transparent 35%), radial-gradient(circle at 80% 10%, rgba(255, 143, 177, 0.12), transparent 32%), linear-gradient(135deg, #ffffff, #fdf3f7 45%, #ffffff); color:var(--text); }
.shell { max-width: 1080px; margin: 0 auto; padding: 20px; }
.nav { display:flex; align-items:center; justify-content:space-between; background:#fff; border:1px solid var(--border); border-radius:var(--radius); padding:12px 16px; box-shadow:var(--shadow); margin-bottom:14px; }
.brand { display:flex; align-items:center; gap:10px; font-weight:700; }
.brand .dot { width:12px; height:12px; border-radius:50%; background: linear-gradient(135deg,#ff5c8a,#ff8fb1); box-shadow:0 0 10px rgba(255,92,138,0.6); }
.nav-links { display:flex; gap:14px; align-items:center; flex-wrap:wrap; }
.nav-links a { padding:8px 14px; border-radius:10px; color:var(--text); font-weight:500; text-decoration:none; }
.nav-links a:hover { background: rgba(255,92,138,0.12); }
.cart-link { position:relative; display:inline-flex; align-items:center; gap:6px; }
.cart-badge { display:inline-flex; align-items:center; justify-content:center; min-width:20px; height:20px; padding:2px 6px; border-radius:999px; background:#16804a; color:#fff; font-size:12px; font-weight:700; }
.user-menu { position: relative; }
.user-menu summary { list-style: none; cursor: pointer; padding: 8px 12px; border-radius: 10px; }
.user-menu[open] summary, .user-menu summary:hover { background: rgba(255, 92, 138, 0.12); }
.user-menu .dropdown { position: absolute; right: 0; top: 110%; background: #fff; border: 1px solid var(--border); border-radius: 10px; box-shadow: var(--shadow); min-width: 150px; padding: 8px 0; z-index: 20; }
.user-menu .dropdown a { display: block; padding: 8px 12px; color: var(--text); text-decoration: none; }
.user-menu .dropdown a:hover { background: rgba(255, 92, 138, 0.12); }
.card { background:#fff; border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px; margin:14px auto 0; max-width:960px; }
.grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:14px; }
.fav-card { border:1px solid var(--border); border-radius:14px; padding:12px; box-shadow:var(--shadow); display:flex; gap:12px; background:#fff; }
.fav-card img { width:96px; height:96px; object-fit:cover; border-radius:12px; background:#f5f6f8; }
.muted { color:var(--muted); }
.pill { padding:6px 10px; border-radius:999px; background:rgba(255,92,138,0.12); color:var(--text); font-weight:600; font-size:12px; display:inline-flex; gap:6px; align-items:center; }
.cta { padding:10px 14px; border:none; border-radius:12px; font-weight:600; cursor:pointer; background: linear-gradient(135deg,#ff5c8a,#ff8fb1); color:#fff; text-decoration:none; }
  </style>
</head>
<body>
  <div class="shell">
    <%- include('partials/nav') %>

    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;">
        <div>
          <h2 style="margin:0 0 4px;">Favorites</h2>
          <p class="muted" style="margin:0;">Products you've liked.</p>
        </div>
        <a href="/shopping" class="cta">Browse products</a>
      </div>

      <div style="margin-top:12px;">
        <% if (!favorites || !favorites.length) { %>
          <p class="muted">No favorites yet.</p>
        <% } else { %>
          <div class="grid">
            <% favorites.forEach(function(f){ %>
              <div class="fav-card">
                <img src="/images/<%= f.image || 'placeholder.png' %>" alt="<%= f.productName %>">
                <div style="flex:1; display:flex; flex-direction:column; gap:6px;">
                  <div style="font-weight:700;"><%= f.productName %></div>
                  <div class="muted">$ <%= Number(f.price || 0).toFixed(2) %></div>
                  <% if (f.category) { %><span class="pill"><%= f.category %></span><% } %>
                  <% if (f.dietary) { %><span class="pill"><%= f.dietary %></span><% } %>
                </div>
                <form action="/add-to-cart/<%= f.productId %>" method="POST" style="display:flex; flex-direction:column; gap:8px; align-items:flex-end;">
                  <button class="cta" type="submit">Add to cart</button>
                  <button class="pill" formaction="/favorites/<%= f.productId %>/toggle" formmethod="post">Remove</button>
                </form>
              </div>
            <% }) %>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</body>
</html>

